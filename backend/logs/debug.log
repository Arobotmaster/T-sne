2025-09-20 14:10:18,717 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:10:18.717529", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/test", "method": "GET", "error_id": "ce6df2b4-8e4c-4df5-b8a5-29983c286978"}}
2025-09-20 14:15:59,404 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:15:59.401399", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/favicon.ico", "method": "GET", "error_id": "3ec1406e-14ce-47f8-bb2f-2c0f5ac7040b"}}
2025-09-20 14:16:12,384 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:12.384141", "error_type": "ValueError", "error_message": "Test error", "severity": "error", "category": "system", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/middleware/graceful_degradation.py\", line 317, in process_with_degradation\n    yield context\n  File \"/home/zjp/Rn/claude-test-tsne/backend/tests/unit/middleware/test_graceful_degradation.py\", line 258, in test_process_with_degradation_error\n    raise ValueError(\"Test error\")\nValueError: Test error\n", "additional_info": {"context": {"operation": "test_operation", "degradation_level": "none", "available_features": ["real_time_updates", "advanced_visualization", "batch_processing", "export_high_quality", "data_cache", "performance_monitoring"], "duration_ms": 0.24247169494628906}}}
2025-09-20 14:16:12,386 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:12.385863", "error_type": "ValueError", "error_message": "Test error", "severity": "error", "category": "system", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/middleware/graceful_degradation.py\", line 317, in process_with_degradation\n    yield context\n  File \"/home/zjp/Rn/claude-test-tsne/backend/tests/unit/middleware/test_graceful_degradation.py\", line 271, in test_process_with_degradation_critical_error\n    raise ValueError(\"Test error\")\nValueError: Test error\n", "additional_info": {"context": {"operation": "test_operation", "degradation_level": "critical", "available_features": ["real_time_updates", "advanced_visualization", "batch_processing", "export_high_quality", "data_cache", "performance_monitoring"], "duration_ms": 0.1976490020751953}}}
2025-09-20 14:16:27,658 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.657953", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/test", "method": "GET", "error_id": "1c3a8f54-49d8-412f-9a5b-924552cbfaf2"}}
2025-09-20 14:16:27,659 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.659509", "error_type": "RequestValidationError", "error_message": "[{'loc': ['body', 'file'], 'msg': 'field required', 'type': 'value_error.missing'}]", "severity": "warning", "category": "validation", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/upload", "method": "POST", "error_id": "5329e659-c8de-4757-9d68-3810434b3af6", "validation_details": [{"loc": ["body", "file"], "msg": "field required", "type": "value_error.missing"}]}}
2025-09-20 14:16:27,661 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.661097", "error_type": "ValueError", "error_message": "Invalid data format", "severity": "error", "category": "algorithm", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/process", "method": "POST", "error_id": "e910def9-07a4-4128-a6b3-c3e07c1ca3ae"}}
2025-09-20 14:16:27,662 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.662579", "error_type": "KeyError", "error_message": "'missing_column'", "severity": "error", "category": "algorithm", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/datasets", "method": "GET", "error_id": "962b3fa1-750d-4495-a423-5f554f5a28c0", "missing_key": "'missing_column'"}}
2025-09-20 14:16:27,664 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.664218", "error_type": "RuntimeError", "error_message": "Database connection failed", "severity": "critical", "category": "system", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/api/data", "method": "GET", "error_id": "fe4f439f-0eb6-41dd-9aa1-ee6b90bec9dd", "exception_type": "RuntimeError"}}
2025-09-20 14:16:27,672 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.672259", "error_type": "HTTPException", "error_message": "400: Test error", "severity": "warning", "category": "network", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/test", "method": "GET", "error_id": "8bd85779-85be-4040-85a1-edc50975d262"}}
2025-09-20 14:16:27,672 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:16:27.672609", "error_type": "HTTPException", "error_message": "400: Test error", "severity": "warning", "category": "network", "stack_trace": "NoneType: None\n", "additional_info": {"request_path": "/test", "method": "GET", "error_id": "22a637a9-4cb7-43ec-bf5e-d25c12b79d64"}}
2025-09-20 14:24:05,233 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:24:05.232878", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/health", "method": "GET", "error_id": "1c720caa-7480-46a8-82fc-4b7f0913e44d"}}
2025-09-20 14:27:23,631 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:27:23.630634", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/upload", "method": "POST", "error_id": "3cf1fb7e-3912-4505-9215-cf14f31c8b28"}}
2025-09-20 14:28:28,740 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:28:28.739539", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/upload", "method": "POST", "error_id": "5a737e49-b20c-43e0-8aaf-25f869266f72"}}
2025-09-20 14:29:14,428 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:29:14.428113", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/upload", "method": "POST", "error_id": "59de1a0d-a11d-4642-b311-653953d21cd9"}}
2025-09-20 14:33:42,935 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:33:42.934767", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/upload/upload", "method": "HEAD", "error_id": "61024b57-fba8-4ed6-92a8-ea4bed2d2abd"}}
2025-09-20 14:33:56,459 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:33:56.459183", "error_type": "HTTPException", "error_message": "405: Method Not Allowed", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 747, in app\n    await partial.handle(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 285, in handle\n    raise HTTPException(status_code=405, headers=headers)\nstarlette.exceptions.HTTPException: 405: Method Not Allowed\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "HEAD", "error_id": "ac3f9106-aaab-4ecf-a356-76216cf9730d"}}
2025-09-20 14:34:21,697 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:34:21.694940", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 73, in upload_csv_file\n    raise HTTPException(\n    ...<2 lines>...\n    )\nfastapi.exceptions.HTTPException: 400: 文件名包含非法字符\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 103, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "fde81b68-cefc-4264-99cd-41afad920eb1"}}
2025-09-20 14:34:33,893 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:34:33.892826", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 73, in upload_csv_file\n    raise HTTPException(\n    ...<2 lines>...\n    )\nfastapi.exceptions.HTTPException: 400: 文件名包含非法字符\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 103, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "2a43563d-619f-4e61-aa1d-462f8e7702eb"}}
2025-09-20 14:36:10,004 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:36:10.002535", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 73, in upload_csv_file\n    raise HTTPException(\n    ...<2 lines>...\n    )\nfastapi.exceptions.HTTPException: 400: 文件名包含非法字符\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 103, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "84e863fc-b98f-4666-bdf6-6428710bb586"}}
2025-09-20 14:38:06,697 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:38:06.695502", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 91, in process_upload\n    dataset = await self._create_dataset(file, data, column_info, quality_score, encoding)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 276, in _create_dataset\n    dataset = MOFDataset(\n        filename=file.filename or \"unknown.csv\",\n    ...<4 lines>...\n        data_quality_score=quality_score\n    )\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 1 validation error for MOFDataset\nencoding\n  Value error, 不支持的编码格式: UTF-8-SIG [type=value_error, input_value='UTF-8-SIG', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/value_error\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 83, in upload_csv_file\n    dataset_info = await upload_service.process_upload(file)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 107, in process_upload\n    raise HTTPException(status_code=400, detail=f\"文件处理失败: {str(e)}\")\nfastapi.exceptions.HTTPException: 400: 文件处理失败: 1 validation error for MOFDataset\nencoding\n  Value error, 不支持的编码格式: UTF-8-SIG [type=value_error, input_value='UTF-8-SIG', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/value_error\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 104, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "b1f9e95b-ceaa-4462-910b-f7a3cea48ad3"}}
2025-09-20 14:38:40,649 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:38:40.647771", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 91, in process_upload\n    dataset = await self._create_dataset(file, data, column_info, quality_score, encoding)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 276, in _create_dataset\n    dataset = MOFDataset(\n        filename=file.filename or \"unknown.csv\",\n    ...<4 lines>...\n        data_quality_score=quality_score\n    )\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 1 validation error for MOFDataset\nencoding\n  Value error, 不支持的编码格式: UTF-8-SIG [type=value_error, input_value='UTF-8-SIG', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/value_error\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 83, in upload_csv_file\n    dataset_info = await upload_service.process_upload(file)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 107, in process_upload\n    raise HTTPException(status_code=400, detail=f\"文件处理失败: {str(e)}\")\nfastapi.exceptions.HTTPException: 400: 文件处理失败: 1 validation error for MOFDataset\nencoding\n  Value error, 不支持的编码格式: UTF-8-SIG [type=value_error, input_value='UTF-8-SIG', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/value_error\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 104, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "60aca8aa-9d84-4d7f-be94-438f7456b10b"}}
2025-09-20 14:39:21,202 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T14:39:21.199979", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 91, in process_upload\n    dataset = await self._create_dataset(file, data, column_info, quality_score, encoding)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 276, in _create_dataset\n    dataset = MOFDataset(\n        filename=file.filename or \"unknown.csv\",\n    ...<4 lines>...\n        data_quality_score=quality_score\n    )\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/pydantic/main.py\", line 214, in __init__\n    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)\npydantic_core._pydantic_core.ValidationError: 1 validation error for MOFDataset\nencoding\n  Value error, 不支持的编码格式: UTF-8-SIG [type=value_error, input_value='UTF-8-SIG', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/value_error\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 83, in upload_csv_file\n    dataset_info = await upload_service.process_upload(file)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 107, in process_upload\n    raise HTTPException(status_code=400, detail=f\"文件处理失败: {str(e)}\")\nfastapi.exceptions.HTTPException: 400: 文件处理失败: 1 validation error for MOFDataset\nencoding\n  Value error, 不支持的编码格式: UTF-8-SIG [type=value_error, input_value='UTF-8-SIG', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.10/v/value_error\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 104, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "f3aa9f06-c2fb-44b4-b3ae-d9010f07dfb1"}}
2025-09-20 16:53:30,078 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T16:53:30.068230", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/datasets", "method": "GET", "error_id": "ff0fcf79-6ed4-47be-aeb2-e390815077fe"}}
2025-09-20 16:53:32,616 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T16:53:32.615833", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/datasets", "method": "GET", "error_id": "e1acf604-5ddc-42d2-a893-a2da875d6616"}}
2025-09-20 16:53:49,426 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T16:53:49.425764", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/v1/datasets", "method": "GET", "error_id": "045d5bee-4245-468c-b13d-44fc3c89cc09"}}
2025-09-20 16:54:35,310 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T16:54:35.309705", "error_type": "HTTPException", "error_message": "404: Not Found", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 766, in app\n    await self.default(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 652, in not_found\n    raise HTTPException(status_code=404)\nstarlette.exceptions.HTTPException: 404: Not Found\n", "additional_info": {"request_path": "/api/v1/datasets/status", "method": "GET", "error_id": "b8abdf76-7ffb-4f96-92f9-1fa8ea039210"}}
2025-09-20 17:22:51,779 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T17:22:51.768049", "error_type": "HTTPException", "error_message": "405: Method Not Allowed", "severity": "warning", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 747, in app\n    await partial.handle(scope, receive, send)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 285, in handle\n    raise HTTPException(status_code=405, headers=headers)\nstarlette.exceptions.HTTPException: 405: Method Not Allowed\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "GET", "error_id": "d4de8ba7-54f2-485e-8258-ed47b6fab063"}}
2025-09-20 18:51:19,641 [DEBUG] error_handler: ERROR_CONTEXT: {"timestamp": "2025-09-20T18:51:19.638612", "error_type": "HTTPException", "error_message": "500: 内部服务器错误", "severity": "critical", "category": "network", "stack_trace": "Traceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 129, in _save_temp_file\n    temp_file_path = self.temp_file_manager.create_temp_file(\n        prefix=\"upload_\",\n        suffix=\".csv\"\n    )\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/utils/temp_file_manager.py\", line 75, in create_temp_file\n    fd, temp_path = tempfile.mkstemp(\n                    ~~~~~~~~~~~~~~~~^\n        prefix=prefix,\n        ^^^^^^^^^^^^^^\n        suffix=suffix,\n        ^^^^^^^^^^^^^^\n        dir=str(self.temp_dir)\n        ^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/tempfile.py\", line 357, in mkstemp\n    return _mkstemp_inner(dir, prefix, suffix, flags, output_type)\n  File \"/home/zjp/miniconda3/lib/python3.13/tempfile.py\", line 256, in _mkstemp_inner\n    fd = _os.open(file, flags, 0o600)\nFileNotFoundError: [Errno 2] No such file or directory: '/home/zjp/Rn/claude-test-tsne/backend/temp/upload_0ukzxnz7.csv'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 79, in process_upload\n    temp_file_path = await self._save_temp_file(file)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 151, in _save_temp_file\n    raise ValueError(f\"文件保存失败: {str(e)}\")\nValueError: 文件保存失败: [Errno 2] No such file or directory: '/home/zjp/Rn/claude-test-tsne/backend/temp/upload_0ukzxnz7.csv'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 83, in upload_csv_file\n    dataset_info = await upload_service.process_upload(file)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/services/upload_service.py\", line 107, in process_upload\n    raise HTTPException(status_code=400, detail=f\"文件处理失败: {str(e)}\")\nfastapi.exceptions.HTTPException: 400: 文件处理失败: 文件保存失败: [Errno 2] No such file or directory: '/home/zjp/Rn/claude-test-tsne/backend/temp/upload_0ukzxnz7.csv'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/zjp/miniconda3/lib/python3.13/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/zjp/Rn/claude-test-tsne/backend/src/api/upload.py\", line 104, in upload_csv_file\n    raise HTTPException(status_code=500, detail=\"内部服务器错误\")\nfastapi.exceptions.HTTPException: 500: 内部服务器错误\n", "additional_info": {"request_path": "/api/v1/upload/upload", "method": "POST", "error_id": "47e80242-74c3-4b12-8f56-9c2c3af987a9"}}
